<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@3ØØ;4ØØ;5ØØ;6ØØ&display=swap" rel="stylesheet" >
    <link rel="stylesheet" href="../day44/EmployeePayroll.js">
    <link rel="stylesheet" href="../day44/emp.css">
    <title>Employee Payroll Form</title>
</head>
<body>
    <header class="header—content header">
        <div class="logo—content">
        <img src="../images/logo.png" alt="">
        <div>
        <span class="emp—text">EMPLOYEE</span><br>
        <span class="emp—text emp—payroll">PAYROLL</span>
        </div>
        </div>
        </header>

        <!-- <div id="form" >
        <form> -->

        <!-- UC 2 – Employee Payroll Form with Header and Name -->
        <div class="form-content">
            <form class="form" action="#" onsubmit="save(); return false"> 
            <div class="roe-content">
                <label class="lable text" for="name">Name</label>
            <input class="input" type="text" id="name" name="name" placeholder="your name..." required>

            <!-- <label class="label text" for="name">Name</label>
            <input class="input" type="text" id="name" name="name"
            placeholder="Enter name" required>
            <error-output class="text-error" for="text"></error-output> -->
            <!-- </div> -->
        <!-- </form> -->
        </div>

         <!-- UC 3 – Specify Profile Pic to the Employee Payroll App -->
        <div class="row-content">
            <label class="label text" for="Profile">Profile Image</label>
            <div class="Profile-radio-content">
                <label>
                    <input type="radio" id="Profile1" name="Profile" value="../profile-images/Ellipse -3.png" required >
                    <img class="Profile" id="image1" src="../profile-images/Ellipse -3.png" >
                </label>

                <label>
                    <input type="radio" id="Profile2" name="Profile" value="../profile-images/Ellipse 1.png" required >
                    <img class="Profile" id="image2" src="../profile-images/Ellipse 1.png" >
                </label>

                <label>
                    <input type="radio" id="Profile3" name="Profile" value="../profile-images/Ellipse -8.png" required >
                    <img class="Profile" id="image3" src="../profile-images/Ellipse -8.png" >
                </label>
                <label>
                    <input type="radio" id="Profile4" name="Profile" value="../profile-images/Ellipse -7.png" required >
                    <img class="Profile" id="image4" src="../profile-images/Ellipse -7.png" >
                </label>
            </div>
        </div>

        <!-- UC 4 – Employee Payroll Form with Gender, Department and Salary Range -->
        <div class="row-content">
            <label class="label text" for="gender">Gender</label>
            <div>
                <input type="radio" id="male" name="gender" value="male">
                <label class="text" for="male">Male</label>
                <input type="radio" id="female" name="gender" value="female">
                <label class="text" for="female">Female</label>
            </div>
        </div>
        <div class="row-content">
            <label class="label text" for="department">Department</label>            
            <div>
                <input class="checkbox" type="checkbox" id="hr" name="hr" value="HR">
                <label class="text" for="hr">HR</label>

                <input class="checkbox" type="checkbox" id="sales" name="sales" value="sales">
                <label class="text" for="sales">Sales</label>

                <input class="checkbox" type="checkbox" id="finance" name="finance" value="finance">
                <label class="text" for="finance">Finance</label>

                <input class="checkbox" type="checkbox" id="engineer" name="engineer" value="engineer">
                <label class="text" for="engineer">Engineer</label>

                <input class="checkbox" type="checkbox" id="other" name="other" value="other">
                <label for="text" for="other" >Others</label>
            </div>
        </div>
        <div class="row-content">
            <label class="label text" for="Salary">Choose salary</label>
            <input class="input" type="range" name="salary" id="salary" min="300000" max="5000000" step="100" value="400000">
            <output class="salary-output-text" for="salary">40000</output>
        </div>

        <!-- UC 5 – Employee Payroll Form with start date -->
        <div class="row-content">
            <label class="label text" for="startDate">Start Date</label>
            <div>
                <select id="day" name="day">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="13">13</option>
                    <option value="14">14</option>
                    <option value="15">15</option>
                    <option value="16">16</option>
                    <option value="17">17</option>
                    <option value="18">18</option>
                    <option value="19">19</option>
                    <option value="20">20</option>
                    <option value="21">21</option>
                    <option value="22">22</option>
                    <option value="23">23</option>
                    <option value="24">24</option>
                    <option value="25">25</option>
                    <option value="26">26</option>
                    <option value="27">27</option>
                    <option value="28">28</option>
                    <option value="29">29</option>
                    <option value="30">30</option>
                    <option value="31">31</option>
                </select>
                <select id="month" name="month">
                    <option value="jan">January</option>
                    <option value="feb">Feburary</option>
                    <option value="mar">March</option>
                    <option value="april">April</option>
                    <option value="may">May</option>
                    <option value="jun">June</option>
                    <option value="july">July</option>
                    <option value="augest">Augest</option>
                    <option value="sep">September</option>
                    <option value="oct">Octomber</option>
                    <option value="nov">November</option>
                    <option value="dec">December</option>
                </select>
                <select id="year" name="year">
                    <option value="2020">2020</option>
                    <option value="2021">2021</option>
                    <option value="2022">2022</option>
                    <option value="2023">2023</option>
                    <option value="2024">2024</option>
                </select>
            </div>
        </div>

        <!-- UC 6 – Ability to add Notes and Button -->
        <div class="row-content">
            <label class="lable text" for="notes">Notes</label>
            <textarea id="notes" class="input" name="notes" placeholder="" style="height: :100px"></textarea>
        </div>
        <div class="buttonParent">
            <a href="./home.html" class="button submitButton">Cancel</a>
            <div class="submit-reset">
                <button type="submit" class="button submitButton" id="submitButton">Submit</button>
                <button type="reset" class="resetButton button">Reset</button>
            </div>
        </div>

      

        <!-- </form>
    </div> -->
     </div> 
         </form>
    </body>


    <script>
        window.addEventListener('DOMContentLoaded',(event)=>{
            const name = document.querySelector('#name')
            const textError = document.querySelector('.text-error')
            name.addEventListener('input',function(){
                if(name.value.length == 0){
                    textError.textContent ="";
                    return;
                }
                try{
                    (new EmployeePayrollData()).name = name.value;;
                    textError.textContent="";
                }catch(e){
                    textError.textContent=e;
                }
            })
    
            const salary = document.querySelector('#salary')
            const output = document.querySelector('.salary-output')
            output.textContent = salary.value
            salary.addEventListener('input',function(){
                output.textContent = salary.value
            })
    
        })
    
        // UC 3 – On Save Create Employee Payroll Object
    
        const save =()=>{
            try{
                let employeePayrollData = creatEmployeePayroll();
            }catch (e){
                return
            }
        }   
    
        const creatEmployeePayroll = ()=>{
        let employeePayrollData = new EmployeePayrollData();
            try{
                employeePayrollData.name = getInputValueById('#name')
            }catch(e){
                setTextValue('.text-error',e)
                throw e;
            }
            employeePayrollData.profilePic = getInputValues('[name=profile]').pop()
            employeePayrollData.gender = getInputValues('[name=gender]').pop()
            employeePayrollData.department = getInputValues('[name=department]').pop()
            employeePayrollData.salary = getInputValuesById('#salary')
            employeePayrollData.note = getInputValueById('#notes')
            let date = getInputValueById('#day')+" "+getInputValueById('#month')+
                " "+getInputValueById('#year');
            employeePayrollData.date = Date.parse(date)
            alert(employeePayrollData.toString())
            return employeePayrollData
    
        }
    
        const getSelectedValues = (propertyValues) => {
            let allItems = document.querySelectorAll(propertyValues);
            let selItem =[]
            allItems.forEach(item=>{
                if(item.checked) selItem.push(item.value)
            })
            return selItem
        }    
    
        const getInputValueById = (id) =>{
            let value = document.querySelector(id).value
            return value
        }
    
        const getInputValue =(id) =>{
            let value = document.getElementById(id).value
            return value
        }
    
        // UC 4 – Saving Employee Payroll to Local Storage
        function createAndUpdateStorage(employeePayrollData){
            let employeePayrollList = JSON.parse(localStorage.getItem("EmployeePayrollList"))
            if(employeePayrollList != undefined){
                employeePayrollList.push(employeePayrollData)
            }else{
                employeePayrollList = [employeePayrollData]
            }
            alert(employeePayrollList.toString())
            localStorage.selItem("EmployeePayrollList",JSON.stringify(employeePayrollList))
        }
    
        // UC 5 – Reset the Employee Payroll Form
        const resetForm =()=>{
            setValue('#name','')
            unsetSelectedValues('[name=profile]')
            unsetSelectedValues('[name=gender]')
            unsetSelectedValues('[name=department]')
            setValue('#salary','')
            setValue('#notes','')
            setValue('#day','1')
            setValue('#month','january')
            setValue('#year','2020')
        }
        const unsetSelectedValues = (propertyValues)=>{
            let allItems = document.querySelectorAll(propertyValues)
            allItems.forEach(item => {
                item.checked = false
            })
        }
    
        const setTextValue =(id,value)=>{
            const element = document.querySelector(id)
            element.textContent=value
        }
    const setValue =(id,value)=>{
        const element = document.querySelector(id)
        element.value=value
    }


// js file data
class EmployeeData{

get id(){return this._id}
set id(id){
    this._id = id;
}

get name(){return this._name;}
set name(name){
    let nameRegex = RegExp('^[A-Z]{1}[a-zA-Z\\s]{2,}$')
    if(nameRegex.test(name))
        this._name = name;
        else throw 'Name is InCorrect !';
}

get profiePic(){ return this._profilePic;}
set profilePic(profiePic){
    this._profilePic = profiePic;
}

get gender(){return this._gender;}
set gender(gender){
    this._gender=gender;
}

get department(){return this.department}
set department(department){
    this._department=department;
}

get salary(){this.salary}
set salary(salary){this._salary=salary}

get note(){this.note}
set note(note){this._note=note}

get startDate(){
    this.startDate
}
set startDate(startDate){
    this._startDate=startDate
}

//method
toString(){
    const options = { year : 'numeric', month:'long',day:'numeric'}
    const empDate = !this.startDate ? "undefined" :
            this.startDate.toLocaleDateString("en-US",options)
    
    return "id= "+this.id+" , name ="+this.name+" , gender= "
    +this.gender+" , profilePic= "+this.profiePic+" , department= "
    +this.department + " , salary= "+this.salary+" , startDate= "
    +empDate + " , notes= "+this.note;
}



}


    </script>

</html>

